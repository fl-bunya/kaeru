# Kaeru - 乗換案内ルート取得プロジェクト

このリポジトリは、Yahoo乗換案内から「新富町(東京都) → 上福岡」のルート情報を取得するサンプルを、TypeScript・Go・Rustの3言語で実装したものです。

---

## 各言語の実行方法

### TypeScript (bun)
**推奨: トランスパイル版（開発・本番用）**
1. トランスパイル:
   ```sh
   cd ts
   npx tsc
   ```
2. 実行:
   ```sh
   bun run dist/index.js
   ```

**配布用: bundle版（依存関係不要）**
1. トランスパイル + バンドル:
   ```sh
   cd ts
   npx tsc
   bun build dist/index.js --outdir dist --target node --minify
   ```
2. 実行:
   ```sh
   bun run dist/index.js
   ```

### Go
1. リリースビルド:
   ```sh
   cd go
   go build -o kaeru main.go
   ```
2. 実行:
   ```sh
   ./kaeru
   ```

### Rust
1. リリースビルド:
   ```sh
   cd rust
   cargo build --release
   ```
2. 実行:
   ```sh
   ./target/release/kaeru
   ```

---

## 実行結果の比較

### 出力例（2025年7月15日 11:32頃）

```
🚇 Yahoo乗換案内からルート情報を取得中...
Fetching transit routes from: https://transit.yahoo.co.jp/search/result?from=新富町(東京都)&to=上福岡&...（省略）

📋 取得したルート情報 (3件):

=== ルート 1 ===
発車時刻: 11:39
到着時刻: 12:52
ルート: 東京メトロ有楽町線川越市行 → 東武東上線川越市行

=== ルート 2 ===
発車時刻: 12:09
到着時刻: 13:22
ルート: 東京メトロ有楽町線川越市行 → 東武東上線川越市行

=== ルート 3 ===
発車時刻: 12:39
到着時刻: 13:52
ルート: 東京メトロ有楽町線川越市行 → 東武東上線川越市行
```

### パフォーマンス比較

| 言語 | ファイルサイズ | 実行時間 | 特徴 |
|------|---------------|----------|------|
| **TypeScript (bun)** | 4.5KB (トランスパイル) | ~1.26秒 | 軽量、開発しやすい |
| **TypeScript (bun)** | 1.0MB (bundle) | ~1.44秒 | 依存関係含む、単一ファイル |
| **Go** | 8.3MB | ~0.63秒 | 高速、ランタイム不要 |
| **Rust** | 4.4MB | ~0.55秒 | 最速、ランタイム不要 |

### 詳細
- **TypeScript (トランスパイル)**: 最も軽量、bunの最適化で高速実行
- **TypeScript (bundle)**: 依存関係を含む単一ファイル、配布用
- **Go**: バランスの取れた性能、ランタイム不要の単一バイナリ
- **Rust**: 最高の実行速度、ランタイム不要でメモリ安全

### 注意事項
- **TypeScript**: 実行にはNode.js/bunランタイム（~50-100MB）が必要
- **Go/Rust**: ランタイム不要、真の意味での単一ファイル配布が可能
- **bundle版**: 開発時は不要、依存関係をインストールできない環境での配布用

- **TypeScript (bun)**、**Go**、**Rust** いずれも同じルート情報が取得できます。
- 実行速度やバイナリサイズ、依存関係の扱いなど、各言語の特徴を比較できます。

---

## ディレクトリ構成

```
kaeru/
  go/      # Go実装
  rust/    # Rust実装
  ts/      # TypeScript実装
```

---

## 備考
- 各言語の詳細なREADMEはそれぞれのディレクトリにあります。
- Yahoo乗換案内のHTML構造が変わると、パース部分の修正が必要になる場合があります。 